---
title: "Lollipop Chart"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
library(reactablefmtr)
library(dplyr)
library(viridis)
```

### This feature is currently available in the development version only. To download the development version from GitHub, run `remotes::install_github("kcuilla/reactablefmtr")`

## Example

Let's start with an example using the Cars93 dataset from the {MASS} package:   

```{r}
data <- MASS::Cars93[20:49, c("Manufacturer", "MPG.city", "MPG.highway")]

reactable(data)
```

To convert your table to a lollipop chart, simply include `lollipop(data)` within the `cell` argument of `colDef` and a default grey-blue lollipop chart will appear:

```{r}
reactable(data,
          defaultColDef = colDef(
            align = "left", # left-align column headers
            cell = lollipop(data)))
```

As with `data_bars()`, the lollipops animate on sort.

<br>

## Custom Color Palettes

Within `lollipop()`, you can control both the color of the bar and the color of the circle by specifying the colors within `bar_color` and `circle_color`: 

```{r}
reactable(data,
          defaultColDef = colDef(
            align = "left", 
            cell = lollipop(data,
                            bar_color = "royalblue",
                            circle_color = "lightgreen")))
```

And just like with `color_scales()`, you are free to use dark colors for the circles and the font color will automatically adjust based on the saturation of the color:

```{r}
reactable(data,
          defaultColDef = colDef(
            align = "left", 
            cell = lollipop(data,
                            bar_color = "pink",
                            circle_color = "black")))
```

If you provide multiple colors for `bar_color`, it will display a left-to-right gradient for the lollipop bars.

```{r}
reactable(data,
          defaultColDef = colDef(
            align = "left", 
            cell = lollipop(data,
                            bar_color = viridis::viridis(5),
                            circle_color = "black")))
```

If you provide multiple colors for `circle_color`, it will conditionally color the circles from low to high values within that column.

```{r}
reactable(data,
          defaultSortOrder = "desc",
          defaultSorted = "MPG.city",
          defaultColDef = colDef(
            align = "left", 
            cell = lollipop(data,
                            circle_color = viridis::viridis(5))))
```

<br>

## Formatting Numbers

The values within the lollipop circles can be formatted using any of the number formatters included in the {scales} package:

```{r}
data <- sample_n(MASS::Cars93,15) %>% 
  select(Make, Price)

reactable(data,
          defaultColDef = colDef(align = "left", 
                                 cell = lollipop(data, 
                                                 number_fmt = scales::dollar_format(accuracy = 0.1),
                                                 circle_color = "darkgreen",
                                                 bar_color = c("grey","lightgrey","white"))))
```

